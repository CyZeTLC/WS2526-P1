<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Steal The Files - Docs</title>
  <link rel="stylesheet" href="vendor/highlightjs/custom-syntax.css" />
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #6b7280;
      --accent: #2563eb;
      --accent-weak: #e0e7ff;
    }
    body {
      margin: 0;
      padding: 32px;
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', 'Helvetica Neue', system-ui, sans-serif;
      display: flex;
      justify-content: center;
    }
    .container {
      width: min(960px, 100%);
      background: var(--card);
      border-radius: 18px;
      padding: 28px 32px 36px;
      box-shadow: 0 12px 35px rgba(15, 23, 42, 0.08);
      border: 1px solid #e5e7eb;
    }
    header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    header h1 {
      margin: 0;
      font-size: 26px;
    }
    header p {
      margin: 0;
      color: var(--muted);
      font-size: 15px;
    }
    .lang-switch {
      display: flex;
      gap: 8px;
    }
    .lang-switch button {
      border: 1px solid #d1d5db;
      background: #f8fafc;
      color: var(--text);
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.15s ease;
    }
    .lang-switch button:hover {
      border-color: #cbd5e1;
      background: #eef2ff;
    }
    .lang-switch button.active {
      background: var(--accent-weak);
      color: #1d4ed8;
      border-color: #c7d2fe;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }
    .doc {
      margin-top: 18px;
      line-height: 1.65;
      font-size: 16px;
    }
    .doc code {
      background: #f1f5f9;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 14px;
    }
    .doc pre {
      padding: 0;
      background: transparent;
      overflow: auto;
    }
    .doc h2, .doc h3 {
      margin-top: 28px;
      margin-bottom: 10px;
    }
    .doc h2 {
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 6px;
    }
    .doc ul {
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Steal The Files - Documentation</h1>
        <p>JavaFX Platformer &middot; Code + Erkl&auml;rungen</p>
      </div>
      <div class="lang-switch">
        <button data-lang="de" class="active">Deutsch</button>
        <button data-lang="en">English</button>
      </div>
    </header>
    <article id="doc-content" class="doc"></article>
  </div>

  <script id="doc-data" type="application/json">{"de": "# Steal The Files - Dokumentation (DE)\nClient | Server | Core - JavaFX 2D-Plattformer\n\n**Inhalt**\n1. &Uuml;berblick &amp; Architektur\n2. Setup &amp; Start\n3. Spiellogik (Code + Erkl&auml;rung)\n4. GUI/Navi (Code + Erkl&auml;rung + Prompt)\n5. Levelaufbau (Code + Erkl&auml;rung)\n6. Audio &amp; Einstellungen (Code + Erkl&auml;rung + Prompt)\n7. Netzwerk &amp; Daten (Code + Erkl&auml;rung)\n8. Debugging &amp; offene Punkte (Code + Erkl&auml;rung)\n9. Roadmap\n\n## 1. &Uuml;berblick &amp; Architektur\nLevelwahl + Startscreen: Config bestimmt Einstieg; erst LoadingScreen, dann MainMenu. Der Switch ist die einzige Stelle, die das Startlevel setzt.\n```java\nswitch (config.getString(\"currentLevel\")) {\n    case \"Tutorial\" -> setCurrentLevel(new TutorialLevel());\n    case \"Second\"   -> setCurrentLevel(new SecondLevel());\n    case \"Boss\"     -> setCurrentLevel(new BossLevel());\n}\nscreenManager.showScreen(new LoadingScreen(screenManager));\n```\nGame-Loop: Logik-Takt im eigenen Thread (ca. 200 Hz); Render/Scene-&Auml;nderungen laufen auf dem JavaFX-Thread, damit UI nicht blockiert.\n```java\nwhile (running) {\n    double delta = (now - lastTime) / 1_000_000_000.0;\n    lastTime = now;\n    Platform.runLater(() -> currentScreen.update(delta));\n    Thread.sleep(5);\n}\n```\n\n## 2. Setup &amp; Start\nBuild/Run: klassischer Maven-Build; danach Server + Client aus der IDE starten.\n```bash\nmvn clean install\n```\nClient-Initialisierung: liest Sound-Einstellungen, baut ScreenManager + Hauptscreens und zeigt sofort den LoadingScreen. Alles wird direkt aus `config.json` &uuml;bernommen.\n```java\nSoundManager.setMuted(config.getBoolean(\"soundMuted\"));\nSoundManager.setVolume(config.getDouble(\"soundVolume\"));\nscreenManager = new ScreenManager(primaryStage);\nmainMenuScreen = new MainMenuScreen(screenManager);\nsettingsScreen = new SettingsScreen(screenManager);\nscreenManager.showScreen(new LoadingScreen(screenManager));\n```\nWichtige Config-Schl&uuml;ssel: `currentLevel` (Start), `soundVolume`/`soundMuted`, `messages.game.prefix`, `mysql` (Server-Hooks), `tutorialFinished` (Fortschritt).\n\n## 3. Spiellogik (Code + Erkl&auml;rung)\nInput-Toggles: `pollJustPressed` verhindert mehrfaches Ausl&ouml;sen im selben Frame; F1/F2/F3 steuern HUD/Debug/NoClip+GodMode.\n```java\nboolean f1 = input.pollJustPressed(KeyCode.F1);\nboolean f2 = input.pollJustPressed(KeyCode.F2);\nboolean f3 = input.pollJustPressed(KeyCode.F3);\nif (f1) showTooltips = !showTooltips;\nif (f2) showDebugBar = !showDebugBar;\nif (f3) { player.setNoClip(!player.isNoClipEnabled()); player.setGodMode(player.isNoClipEnabled()); }\n```\nPhysik-Schritt: nutzt delta, damit Geschwindigkeit unabh&auml;ngig von FPS bleibt; Bounding-Box dient als Basis f&uuml;r Kollisionen.\n```java\ndy += Game.gravity * delta;\ndouble nextX = x + dx;\ndouble nextY = y + dy;\nRectangle2D next = new Rectangle2D(nextX, nextY, player.getWidth(), player.getHeight());\n```\nPlattform-Kollision: trennt Landung (oben) von Seitenkontakt; setzt Velocity passend zur&uuml;ck.\n```java\nif (next.intersects(pBounds)) {\n    if (y + player.getHeight() <= platform.getY()) { nextY = platform.getY() - player.getHeight(); dy = 0; onGround = true; }\n    else if (x + player.getWidth() <= platform.getX()) { nextX = platform.getX() - player.getWidth(); dx = 0; }\n}\n```\nGasBarrier: erfordert Flipper-Flag + Tastendruck E, sonst t&ouml;dlich.\n```java\nif (block instanceof GasBarrierBlock barrier && interactPressed && player.hasFlipper()) {\n    barrier.deactivate();\n    continue;\n}\n```\nLaser-Spawn: pr&uuml;ft horizontalen Abstand und Cooldown, erzeugt Projektil mit fixer Lifetime (4s im LaserBlock).\n```java\nboolean close = Math.abs(player.getLocation().getX() - getLocation().getX()) < 440;\nif (close && fireTimer >= fireCooldown) {\n    fireTimer = 0;\n    return new LaserBlock(new Location(spawnX, eyeY), dir, 320);\n}\n```\nPerk-Reset: Buffs (Jump/Speed) laufen 10s, danach werden Standardwerte gesetzt.\n```java\nGame.jumpPower *= 1.25;\nPauseTransition t = new PauseTransition(Duration.seconds(10));\nt.setOnFinished(e -> Game.jumpPower = 800);\nt.play();\n```\nProgress-Gate: USB schaltet Sammeln frei, Folder z&auml;hlen erst danach.\n```java\nif (block instanceof USBStickBlock) Game.thePlayer.setCanCollectFiles(true);\nif (block instanceof FolderBlock && Game.thePlayer.isCanCollectFiles()) block.setActive(false);\n```\nKamera-Smoothing: einfacher Lerp Richtung Ziel, um ruckelfreies Nachziehen zu erhalten.\n```java\ndouble targetX = player.getLocation().getX() - marginX;\ncameraX += (targetX - cameraX) * cameraSmooth;\n```\nGame-Over: stoppt den Frame und wechselt ins Hauptmen&uuml;.\n```java\nif (player.getHealth() <= 0) { handleGameOver(); return; }\n```\n\n## 4. GUI/Navi (Code + Erkl&auml;rung + Prompt)\nLoadingScreen: Fortschrittsbalken via Timeline, Assets werden parallel vorgew&auml;rmt; danach automatisch ins MainMenu.\n```java\nKeyFrame kf = new KeyFrame(Duration.millis(3000), kvWidth);\ntimeline.getKeyFrames().add(kf);\nnew Thread(() -> { for (Material m : Material.values()) cache(m); }).start();\ntimeline.setOnFinished(e -> showScreen(mainMenu));\n```\nSettingsScreen: Volume-Slider wirkt sofort, Mute deaktiviert den Slider; Werte landen direkt in der Config.\n```java\nvolumeSlider.valueProperty().addListener((o, ov, nv) -> { SoundManager.setVolume(nv.doubleValue()); updateVolumeLabel(); });\nmuteBtn.setOnAction(e -> {\n    SoundManager.setMuted(!SoundManager.isMuted());\n    volumeSlider.setDisable(SoundManager.isMuted());\n    updateMuteButton();\n});\n```\nHUD: aktualisiert Files und Health pro Frame; nutzt aktive Folder-Bl&ouml;cke als Z&auml;hler.\n```java\ntotalFolderCount = countFolderBlocks();\nfilesProgressLbl.setText(\"Files: \" + countActiveFolders() + \"/\" + totalFolderCount);\nupdateHealth();\n```\nPause: blendet nur Overlay ein, Logik l&auml;uft weiter (Debug).\n```java\nprivate void togglePause() {\n    paused = !paused;\n    if (pauseOverlay != null) pauseOverlay.setVisible(paused);\n}\n```\nStage: Fullscreen, ohne Window-Chrome, keine Exit-Kombo (Absicht: Immersion).\n```java\nstage.initStyle(StageStyle.UNDECORATED);\nstage.setFullScreen(true);\nstage.setFullScreenExitKeyCombination(KeyCombination.NO_MATCH);\n```\n**Prompt (Kamera, ChatGPT)**: \"Gib mir eine einfache Dead-Zone-Kamera f&uuml;r einen 2D-Plattformer in Java/JavaFX, die weich auf den Spieler lerpt; nenne marginX/marginY und einen smoothing-Faktor.\" Ergebnis: Dead-Zone marginX=400, marginY=150, smoothing=0.1 mit einfachem Lerp wie oben umgesetzt.\n\n## 5. Levelaufbau (Code + Erkl&auml;rung)\nLava-Helper: schlie&szlig;t Gaps zwischen sortierten Plattformen automatisch mit Lava-S&auml;ulen.\n```java\nfor (int i = 0; i < ordered.size()-1; i++) {\n    double gapStart = cur.getX() + cur.getWidth();\n    double gapWidth = next.getX() - gapStart;\n    if (gapWidth > 1.0) blocks.add(createLavaColumn(gapStart, lavaY, gapWidth, lavaH));\n}\n```\nTutorialLevel: Basis-Layout mit fr&uuml;hem USB-Gate, FloatingPlatform und Finish rechts.\n```java\nplatforms.add(new Platform(0, h-300, 450, 600, root));\nblocks.add(new USBStickBlock(new Location(200, h-360)));\nblocks.add(new FloatingPlatformBlock(new Location(940, h-340), new Location(1224, h-340), 120));\nblocks.add(new FinishBlock(new Location(2400, h-490)));\n```\nSecondLevel: Flipper nahe Start, RobotEnemy am Ende, GasBarrier vorbereitet (auskommentiert).\n```java\nblocks.add(new FlipperItem(new Location(220, h-320)));\nblocks.add(new RobotEnemyBlock(new Location(5000, h-396), 500, 180));\n// blocks.add(new GasBarrierBlock(new Location(4550, h-428), 64, 128));\nblocks.add(new FolderBlock(new Location(3600, h-530)));\n```\nBossLevel: vier Roboter in Linie, Finish dahinter.\n```java\nblocks.add(new RobotEnemyBlock(new Location(250, h-396), 500, 180));\nblocks.add(new RobotEnemyBlock(new Location(1400, h-396), 500, 180));\nblocks.add(new FinishBlock(new Location(1800, h-390)));\n```\nNotizen: USB vor Foldern zwingt Progress; Koordinaten hart codiert, keine Kamera-Bounds, `Level.update()` leer.\n\n## 6. Audio &amp; Einstellungen (Code + Erkl&auml;rung + Prompt)\nPersistenz: Volume/Mute werden sofort in der Config gesichert; UI spiegelt den Zustand.\n```java\npublic static void setVolume(double volume) {\n    globalVolume = Math.max(0, Math.min(1, volume));\n    Game.getInstance().getConfig().getObject().put(\"soundVolume\", volume);\n    Game.getInstance().getConfig().save();\n}\npublic static void setMuted(boolean muted) {\n    SoundManager.muted = muted;\n    Game.getInstance().getConfig().getObject().put(\"soundMuted\", muted);\n    Game.getInstance().getConfig().save();\n}\n```\nDucking + Men&uuml;musik: Effekte k&ouml;nnen Musik kurz absenken, Men&uuml;-Loop l&auml;uft im Hintergrund.\n```java\nSoundManager.playWithDuck(Sound.JUMP_BOOST, 1.0, 0.06);\nSoundManager.playBackground(Music.MENU, true);\n```\nUI-Feedback: Slider wird deaktiviert, wenn stumm.\n```java\nvolumeSlider.setDisable(SoundManager.isMuted());\n```\n**Prompt (Audio, ChatGPT)**: \"Wir haben JavaFX MediaPlayer f&uuml;r Musik/Effekte. Wie viel dB Gain k&ouml;nnen wir pauschal boosten, ohne zu clippen, und wie stark sollten wir die Musik beim Effekt ducking absenken?\" Ergebnis: ca. +10 dB Soft-Boost &uuml;ber Faktor, Ducking auf etwa 6% Grundlautst&auml;rke (siehe `DB_BOOST` und `playWithDuck`).\n\n## 7. Netzwerk &amp; Daten (Code + Erkl&auml;rung)\nClient-Verbindung: TCP an localhost:25570, sendet Login, startet Receiver/Sender Threads.\n```java\nsocket = new Socket(InetAddress.getByName(\"localhost\"), 25570);\nsendPacket(new ClientLoginPacket(thePlayer.getUuid()));\nnetworkExecutor.execute(new ReceiverTask());\nnetworkExecutor.execute(new SenderTask());\n```\nHeartbeats: 20 Ticks/s halten die Session aktiv.\n```java\nwhile (!socket.isClosed()) {\n    sendPacket(new ClientDataPacket(thePlayer.getUuid()));\n    Thread.sleep(50);\n}\n```\nServer-Handling: deserialisiert Pakete, Events k&ouml;nnen Abbruch ausl&ouml;sen.\n```java\nint bytesRead = dis.read(received);\nPacket packet = SerializationUtils.deserialize(actual, Packet.class);\nif (((EventCancelable) new ReceivePacketEvent(packet, socket).call()).isCancelled()) break;\n```\nScore-Push: sendet Highscore (Level-Name derzeit fest).\n```java\nsendPacket(new ClientSubmitScorePacket(thePlayer.getUuid(), score, \"Level_1\"));\n```\n\n## 8. Debugging &amp; offene Punkte (Code + Erkl&auml;rung)\nRuntime-Toggles + Game-Over: schaltet HUD/Debug/NoClip, beendet Frame bei 0 HP.\n```java\nif (f1) showTooltips = !showTooltips;\nif (f2) showDebugBar = !showDebugBar;\nif (f3) { player.setNoClip(!player.isNoClipEnabled()); player.setGodMode(player.isNoClipEnabled()); }\nif (player.getHealth() <= 0) { handleGameOver(); return; }\n```\nOffen: Pause stoppt Logik nicht; `Level.update()` leer; Kamera-Clamps fehlen; GasBarrier im SecondLevel auskommentiert; LevelFinished-Stats Platzhalter.\n\n## 9. Roadmap\nKurzfristig: echte Pause, echte LevelFinished-Stats, Kamera-Bounds, GasBarrier aktivieren.\nMittelfristig: `Level.update()` f&uuml;r mover/timer, Leveldaten aus JSON/Editor, HUD um Timer/Score.\nLangfristig: Multiplayer/Highscore mit DB fertigstellen, Achievements/Serverliste ans Backend binden.\n", "en": "# Steal The Files - Documentation (EN)\nClient | Server | Core - JavaFX 2D platformer\n\n**Contents**\n1. Overview & Architecture\n2. Setup & Start\n3. Game Logic (code + notes)\n4. UI/Navigation (code + notes + prompt)\n5. Level Build (code + notes)\n6. Audio & Settings (code + notes + prompt)\n7. Networking & Data (code + notes)\n8. Debugging & Open Points (code + notes)\n9. Roadmap\n\n## 1. Overview & Architecture\nLevel selection + first screen; LoadingScreen always first, then MainMenu.\n```java\nswitch (config.getString(\"currentLevel\")) {\n    case \"Tutorial\" -> setCurrentLevel(new TutorialLevel());\n    case \"Second\"   -> setCurrentLevel(new SecondLevel());\n    case \"Boss\"     -> setCurrentLevel(new BossLevel());\n}\nscreenManager.showScreen(new LoadingScreen(screenManager));\n```\nLogic thread + JavaFX render keeps UI responsive; delta comes from the loop.\n```java\nwhile (running) {\n    double delta = (now - lastTime) / 1_000_000_000.0;\n    lastTime = now;\n    Platform.runLater(() -> currentScreen.update(delta));\n    Thread.sleep(5);\n}\n```\n\n## 2. Setup & Start\nBuild/run via Maven; start Server and Client from IDE.\n```bash\nmvn clean install\n```\nClient init applies sound from config, builds screens, shows LoadingScreen.\n```java\nSoundManager.setMuted(config.getBoolean(\"soundMuted\"));\nSoundManager.setVolume(config.getDouble(\"soundVolume\"));\nscreenManager = new ScreenManager(primaryStage);\nmainMenuScreen = new MainMenuScreen(screenManager);\nsettingsScreen = new SettingsScreen(screenManager);\nscreenManager.showScreen(new LoadingScreen(screenManager));\n```\nKey config: `currentLevel`, `soundVolume`, `soundMuted`, `messages.game.prefix`, `mysql`, `tutorialFinished`.\n\n## 3. Game Logic (code + notes)\nDebounced toggles for HUD/Debug/NoClip/GodMode.\n```java\nboolean f1 = input.pollJustPressed(KeyCode.F1);\nboolean f2 = input.pollJustPressed(KeyCode.F2);\nboolean f3 = input.pollJustPressed(KeyCode.F3);\nif (f1) showTooltips = !showTooltips;\nif (f2) showDebugBar = !showDebugBar;\nif (f3) { player.setNoClip(!player.isNoClipEnabled()); player.setGodMode(player.isNoClipEnabled()); }\n```\nDelta-based physics + bounding box for collisions.\n```java\ndy += Game.gravity * delta;\ndouble nextX = x + dx;\ndouble nextY = y + dy;\nRectangle2D next = new Rectangle2D(nextX, nextY, player.getWidth(), player.getHeight());\n```\nPlatform collision resolves landing vs. side to zero-out velocity.\n```java\nif (next.intersects(pBounds)) {\n    if (y + player.getHeight() <= platform.getY()) { nextY = platform.getY() - player.getHeight(); dy = 0; onGround = true; }\n    else if (x + player.getWidth() <= platform.getX()) { nextX = platform.getX() - player.getWidth(); dx = 0; }\n}\n```\nBarrier needs flipper + E; otherwise lethal.\n```java\nif (block instanceof GasBarrierBlock barrier && interactPressed && player.hasFlipper()) {\n    barrier.deactivate();\n    continue;\n}\n```\nEnemy firing uses range + cooldown; lasers expire after 4s (in LaserBlock).\n```java\nboolean close = Math.abs(player.getLocation().getX() - getLocation().getX()) < 440;\nif (close && fireTimer >= fireCooldown) {\n    fireTimer = 0;\n    return new LaserBlock(new Location(spawnX, eyeY), dir, 320);\n}\n```\nPerk reset restores defaults after 10s.\n```java\nGame.jumpPower *= 1.25;\nPauseTransition t = new PauseTransition(Duration.seconds(10));\nt.setOnFinished(e -> Game.jumpPower = 800);\nt.play();\n```\nProgress gate: USB enables folder collection; folders deactivate when picked.\n```java\nif (block instanceof USBStickBlock) Game.thePlayer.setCanCollectFiles(true);\nif (block instanceof FolderBlock && Game.thePlayer.isCanCollectFiles()) block.setActive(false);\n```\nCamera smoothing via simple lerp keeps motion stable.\n```java\ndouble targetX = player.getLocation().getX() - marginX;\ncameraX += (targetX - cameraX) * cameraSmooth;\n```\nGame over check aborts frame and returns to main menu.\n```java\nif (player.getHealth() <= 0) { handleGameOver(); return; }\n```\n\n## 4. UI/Navigation (code + notes + prompt)\nLoadingScreen: 3s timeline for progress; warms textures in parallel; jumps to MainMenu on finish.\n```java\nKeyFrame kf = new KeyFrame(Duration.millis(3000), kvWidth);\ntimeline.getKeyFrames().add(kf);\nnew Thread(() -> { for (Material m : Material.values()) cache(m); }).start();\ntimeline.setOnFinished(e -> showScreen(mainMenu));\n```\nSettingsScreen: live volume; mute toggles slider; both persisted.\n```java\nvolumeSlider.valueProperty().addListener((o, ov, nv) -> { SoundManager.setVolume(nv.doubleValue()); updateVolumeLabel(); });\nmuteBtn.setOnAction(e -> {\n    SoundManager.setMuted(!SoundManager.isMuted());\n    volumeSlider.setDisable(SoundManager.isMuted());\n    updateMuteButton();\n});\n```\nHUD refresh: files from active folders, hearts from player health.\n```java\ntotalFolderCount = countFolderBlocks();\nfilesProgressLbl.setText(\"Files: \" + countActiveFolders() + \"/\" + totalFolderCount);\nupdateHealth();\n```\nPause overlay only flips visibility (logic still runs).\n```java\nprivate void togglePause() {\n    paused = !paused;\n    if (pauseOverlay != null) pauseOverlay.setVisible(paused);\n}\n```\nFullscreen stage without OS chrome for immersion.\n```java\nstage.initStyle(StageStyle.UNDECORATED);\nstage.setFullScreen(true);\nstage.setFullScreenExitKeyCombination(KeyCombination.NO_MATCH);\n```\n**Prompt (Camera, ChatGPT)**: \"Give me a simple dead-zone camera for a 2D Java/JavaFX platformer that lerps smoothly to the player; suggest marginX/marginY and a smoothing factor.\" Result: Dead zone marginX=400, marginY=150, smoothing=0.1 using the lerp shown above.\n\n## 5. Level Build (code + notes)\nLava helper auto-fills gaps between platforms.\n```java\nfor (int i = 0; i < ordered.size()-1; i++) {\n    double gapStart = cur.getX() + cur.getWidth();\n    double gapWidth = next.getX() - gapStart;\n    if (gapWidth > 1.0) blocks.add(createLavaColumn(gapStart, lavaY, gapWidth, lavaH));\n}\n```\nTutorial highlights (USB gate, floating platform, finish right).\n```java\nplatforms.add(new Platform(0, h-300, 450, 600, root));\nblocks.add(new USBStickBlock(new Location(200, h-360)));\nblocks.add(new FloatingPlatformBlock(new Location(940, h-340), new Location(1224, h-340), 120));\nblocks.add(new FinishBlock(new Location(2400, h-490)));\n```\nSecondLevel highlights (flipper early, boss robot end, gas barrier prepped).\n```java\nblocks.add(new FlipperItem(new Location(220, h-320)));\nblocks.add(new RobotEnemyBlock(new Location(5000, h-396), 500, 180));\n// blocks.add(new GasBarrierBlock(new Location(4550, h-428), 64, 128));\nblocks.add(new FolderBlock(new Location(3600, h-530)));\n```\nBossLevel (lane of robots + finish).\n```java\nblocks.add(new RobotEnemyBlock(new Location(250, h-396), 500, 180));\nblocks.add(new RobotEnemyBlock(new Location(1400, h-396), 500, 180));\nblocks.add(new FinishBlock(new Location(1800, h-390)));\n```\nNotes: USB before folders enforces progression; coords hardcoded; no camera bounds; `Level.update()` empty.\n\n## 6. Audio & Settings (code + notes + prompt)\nPersist volume/mute immediately to config; UI reflects state.\n```java\npublic static void setVolume(double volume) {\n    globalVolume = Math.max(0, Math.min(1, volume));\n    Game.getInstance().getConfig().getObject().put(\"soundVolume\", volume);\n    Game.getInstance().getConfig().save();\n}\npublic static void setMuted(boolean muted) {\n    SoundManager.muted = muted;\n    Game.getInstance().getConfig().getObject().put(\"soundMuted\", muted);\n    Game.getInstance().getConfig().save();\n}\n```\nDucking + menu music: SFX can duck music briefly; menu loop runs in background.\n```java\nSoundManager.playWithDuck(Sound.JUMP_BOOST, 1.0, 0.06);\nSoundManager.playBackground(Music.MENU, true);\n```\nSettings UI disables slider when muted.\n```java\nvolumeSlider.setDisable(SoundManager.isMuted());\n```\n**Prompt (Audio, ChatGPT)**: \"We use JavaFX MediaPlayer for music/SFX. How much dB boost is safe as a global gain, and how far should we duck music during SFX?\" Result: ~+10 dB soft boost via factor, duck music to ~6% base volume (see `DB_BOOST` and `playWithDuck`).\n\n## 7. Networking & Data (code + notes)\nClient connect/login and start I/O threads.\n```java\nsocket = new Socket(InetAddress.getByName(\"localhost\"), 25570);\nsendPacket(new ClientLoginPacket(thePlayer.getUuid()));\nnetworkExecutor.execute(new ReceiverTask());\nnetworkExecutor.execute(new SenderTask());\n```\nHeartbeats every 50ms keep connection alive.\n```java\nwhile (!socket.isClosed()) {\n    sendPacket(new ClientDataPacket(thePlayer.getUuid()));\n    Thread.sleep(50);\n}\n```\nServer deserializes; events can cancel processing.\n```java\nint bytesRead = dis.read(received);\nPacket packet = SerializationUtils.deserialize(actual, Packet.class);\nif (((EventCancelable) new ReceivePacketEvent(packet, socket).call()).isCancelled()) break;\n```\nSend score (level name fixed).\n```java\nsendPacket(new ClientSubmitScorePacket(thePlayer.getUuid(), score, \"Level_1\"));\n```\n\n## 8. Debugging & Open Points (code + notes)\nRuntime toggles and game-over guard each frame.\n```java\nif (f1) showTooltips = !showTooltips;\nif (f2) showDebugBar = !showDebugBar;\nif (f3) { player.setNoClip(!player.isNoClipEnabled()); player.setGodMode(player.isNoClipEnabled()); }\nif (player.getHealth() <= 0) { handleGameOver(); return; }\n```\nOpen: pause overlay only; `Level.update()` empty; camera clamps missing; gas barrier commented; LevelFinished stats placeholder.\n\n## 9. Roadmap\nShort term: real pause, real LevelFinished stats, camera bounds, enable GasBarrier path.\nMid term: use `Level.update()` for movers/timers; externalize levels (JSON/editor); HUD timer/score.\nLong term: complete multiplayer/highscore DB flow; backend-driven achievements/server list.\n"}</script>
  <script src="vendor/marked/marked.min.js"></script>
  <script src="vendor/highlightjs/highlight.min.js"></script>
  <script src="vendor/highlightjs/java.min.js"></script>
  <script src="vendor/highlightjs/bash.min.js"></script>
  <script>
    hljs.configure({ ignoreUnescapedHTML: true });
    const data = JSON.parse(document.getElementById('doc-data').textContent);
    const article = document.getElementById('doc-content');
    const buttons = Array.from(document.querySelectorAll('[data-lang]'));

    function render(lang) {
      const md = data[lang] || '';
      article.innerHTML = marked.parse(md);
      document.querySelectorAll('pre code').forEach((block) => hljs.highlightElement(block));
      buttons.forEach((btn) => btn.classList.toggle('active', btn.dataset.lang === lang));
      if (location.hash !== '#' + lang) location.hash = lang;
    }

    const initial = (location.hash || '#de').replace('#', '');
    render(initial === 'en' ? 'en' : 'de');

    buttons.forEach((btn) => btn.addEventListener('click', () => render(btn.dataset.lang)));
  </script>
</body>
</html>
